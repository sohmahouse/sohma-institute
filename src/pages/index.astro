---
import PortalLayout from '../layouts/PortalLayout.astro'

---

<PortalLayout
  title="Institute of Traditional Medicines"
  description="An Australian training institution advancing traditional pharmacological systems through clinical education, a practitioner network, and research programs across five divisions."
>
  <article class="home-page">

    <!-- HERO -->
    <header class="home-hero">
      <div class="hero-inner">
        <div class="hero-columns">
          <div class="hero-left">
            <div class="section-label">Sohma Institute of Traditional Medicines</div>
            <h1 class="hero-title">Training practitioners for the medicine <span class="hero-accent">that already exists.</span></h1>
            <p class="hero-lead">An Australian training institution advancing traditional pharmacological systems as sophisticated therapeutic architectures — not alternatives to modern medicine, but its predecessors. Five clinical divisions. A credential ladder from foundation to fellowship. A practitioner network that gets smarter because you participate.</p>
          </div>
          <div class="hero-right">
            <div class="hero-info-card">
              <div class="hero-info-header">
                <span class="hero-info-label">The Institute</span>
                <div class="hero-info-line"></div>
              </div>
              <div class="hero-info-pillars">
                <div class="hero-info-pillar">
                  <span class="pillar-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                  </span>
                  <span>5 Clinical Divisions</span>
                </div>
                <div class="hero-info-pillar">
                  <span class="pillar-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                  </span>
                  <span>Foundation to Fellowship</span>
                </div>
                <div class="hero-info-pillar">
                  <span class="pillar-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                  </span>
                  <span>Practitioner Network</span>
                </div>
                <div class="hero-info-pillar">
                  <span class="pillar-icon">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
                  </span>
                  <span>6 Research Programs</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>


    <!-- THREE PILLARS -->
    <section class="pillars-section" id="pillars">
      <span class="pillars-eyebrow">What We Do</span>
      <h2 class="section-heading">Three interconnected systems</h2>
      <div class="pillars-columns">
        <div class="pillars-left">
          <a href="/education" class="pillar-card" data-pillar="0">
            <h3>Education</h3>
            <p>Four credential tiers from foundation to fellowship. Case-based clinical mentorship, not lecture-hall reproduction. Every qualification is built on supervised practice within real patient populations.</p>
            <ul class="pillar-details">
              <li>Foundation Certificate &middot; 12 weeks</li>
              <li>Advanced Diploma &middot; 12 months</li>
              <li>Graduate Diploma &middot; 18 months</li>
              <li>Fellowship &middot; 2 years</li>
            </ul>
            <span class="pillar-btn">Explore programs</span>
          </a>
          <a href="/network" class="pillar-card" data-pillar="1">
            <h3>The Field</h3>
            <p>A distributed clinical intelligence network. Credentialed practitioners running shared protocols, contributing outcome data, and conferencing on complex cases across divisional boundaries.</p>
            <ul class="pillar-details">
              <li>Shared clinical protocols</li>
              <li>Real-time case conferencing</li>
              <li>Outcome data contribution</li>
              <li>Cross-divisional collaboration</li>
            </ul>
            <span class="pillar-btn">Enter The Field</span>
          </a>
          <a href="/research" class="pillar-card" data-pillar="2">
            <h3>Research</h3>
            <p>Six research programs developing methodologies appropriate to the complexity of traditional medicine interventions. Whole-systems design, adaptive protocols, and practice-based evidence networks.</p>
            <ul class="pillar-details">
              <li>Whole-systems trial design</li>
              <li>Adaptive clinical protocols</li>
              <li>Practice-based evidence networks</li>
              <li>Traditional pharmacopoeia validation</li>
            </ul>
            <span class="pillar-btn">View programs</span>
          </a>
        </div>
        <div class="pillars-right">
          <div class="pillars-constellation">
            <canvas id="pillars-canvas" aria-hidden="true"></canvas>
          </div>
        </div>
      </div>
    </section>


    <!-- POSITIONING STATEMENT -->
    <section class="position-band" id="position">
      <div class="position-scroll-outer">
        <div class="position-scroll-sticky">
          <div class="position-inner">
            <p class="position-statement" id="position-text">The dominant framing positions traditional medicines as &ldquo;complementary&rdquo; or &ldquo;alternative.&rdquo; The Institute rejects this. Ayurveda, TCM, Unani, Kampo, and Indigenous pharmacopoeia are sophisticated therapeutic architectures that anticipated network pharmacology, systems biology, and precision therapeutics by centuries. These are not analogies. They are convergent descriptions of the same therapeutic reality.</p>
            <a href="/about" class="position-link" id="position-link">Read Our Full Position</a>
          </div>
        </div>
      </div>
    </section>


    <!-- DIVISIONS -->
    <section id="divisions" class="divisions-section">
      <div class="divisions-inner">
        <span class="divisions-eyebrow">Academic Divisions</span>
        <h2 class="divisions-heading">Institute Divisions</h2>
        <p class="divisions-intro">Each division operates as a semi-autonomous academic unit with its own research agenda, credentialing pathway, and clinical translation pipeline.</p>

        <div class="divisions-grid">
          <a href="/education" class="division-card" data-accent="terracotta">
            <span class="division-dot"></span>
            <span class="division-num">I</span>
            <h3>Complex Herbal Medicines</h3>
            <p>Multi-constituent botanical therapeutics, phytochemical synergy, traditional pharmacopoeia systems, and clinical herbal prescribing.</p>
          </a>

          <a href="/education" class="division-card" data-accent="warm">
            <span class="division-dot"></span>
            <span class="division-num">II</span>
            <h3>Emergent &amp; Entheogenic Modalities</h3>
            <p>Cannabis medicine, psilocybin-assisted therapy, psychedelic integration, and novel consciousness-based therapeutic frameworks.</p>
          </a>

          <a href="/education" class="division-card" data-accent="blue">
            <span class="division-dot"></span>
            <span class="division-num">III</span>
            <h3>Systems &amp; Functional Medicine</h3>
            <p>Systems biology approaches to chronic complex illness, functional diagnostics, metabolomic and genomic interpretation.</p>
          </a>

          <a href="/education" class="division-card" data-accent="teal">
            <span class="division-dot"></span>
            <span class="division-num">IV</span>
            <h3>Environmental &amp; Nutritional Medicine</h3>
            <p>Toxicant exposure assessment, environmental determinants, clinical nutrition, microbiome therapeutics.</p>
          </a>

          <a href="/education" class="division-card" data-accent="purple">
            <span class="division-dot"></span>
            <span class="division-num">V</span>
            <h3>Lifestyle &amp; Relational Medicine</h3>
            <p>Somatic therapy, contemplative practice, movement medicine, sleep architecture, and relational health.</p>
          </a>
        </div>
      </div>
    </section>


    <!-- ENTRY PATHWAY -->
    <section class="pathway-section">
      <span class="pathway-eyebrow">Your Entry Point</span>
      <h2 class="section-heading">Four tiers. One credential ladder.</h2>
      <p class="section-intro">Every practitioner enters through the Foundation Certificate. From there, the ladder builds — each tier expanding your clinical autonomy, supervisory responsibilities, and depth of access to the Institute's protocol library.</p>
      <div class="pathway-grid">
        <div class="pathway-tiers">
          <a href="/education/foundation-certificate" class="pathway-tier">
            <span class="pathway-num">1</span>
            <div class="pathway-tier-content">
              <h3>Foundation Certificate</h3>
              <span class="pathway-meta">12 weeks &middot; Online + Clinical Intensive</span>
            </div>
          </a>
          <a href="/education/advanced-diploma" class="pathway-tier">
            <span class="pathway-num">2</span>
            <div class="pathway-tier-content">
              <h3>Advanced Diploma</h3>
              <span class="pathway-meta">12 months &middot; Hybrid Clinical Mentorship</span>
            </div>
          </a>
          <a href="/education/graduate-diploma" class="pathway-tier">
            <span class="pathway-num">3</span>
            <div class="pathway-tier-content">
              <h3>Graduate Diploma</h3>
              <span class="pathway-meta">18 months &middot; Research + Clinical Integration</span>
            </div>
          </a>
          <a href="/education/fellowship" class="pathway-tier">
            <span class="pathway-num">4</span>
            <div class="pathway-tier-content">
              <h3>Fellowship</h3>
              <span class="pathway-meta">2 years &middot; Clinical Leadership + Research</span>
            </div>
          </a>
        </div>
        <div class="pathway-cta-col">
          <p>Your credential determines your tier in The Field — the practitioner network. The network gets stronger with every practitioner who joins.</p>
          <a href="/education" class="pathway-btn">View all programs &rarr;</a>
        </div>
      </div>
    </section>


    <!-- CTA -->
    <section class="cta-section">
      <div class="cta-inner">
        <div class="cta-primary-block">
          <span class="cta-eyebrow">Get Started</span>
          <h2>The Foundation Certificate is your entry point.</h2>
          <p>12 weeks. One division. The beginning of a credential that changes how you practise.</p>
          <a href="/contact" class="cta-primary-btn">Express interest &rarr;</a>
        </div>
        <div class="cta-secondary-block">
          <a href="/education" class="cta-alt">
            <span class="cta-alt-label">Want details first?</span>
            <span class="cta-alt-action">View education programs &rarr;</span>
          </a>
          <a href="/network" class="cta-alt">
            <span class="cta-alt-label">Already credentialed?</span>
            <span class="cta-alt-action">Enter The Field &rarr;</span>
          </a>
          <a href="/whitepapers" class="cta-alt">
            <span class="cta-alt-label">Read the evidence</span>
            <span class="cta-alt-action">Browse whitepapers &rarr;</span>
          </a>
        </div>
      </div>
    </section>

  </article>
</PortalLayout>

<style>
  /* ═══════════ BASE ═══════════ */
  .home-page {
    font-family: 'Manrope', sans-serif;
    color: var(--text-heading);
    padding: 0;
  }
  .home-page p { line-height: 1.8; margin: 0 0 1rem; }
  .home-page p:last-child { margin-bottom: 0; }
  .home-page h2, .home-page h3 { margin: 0; }

  :global(.reading-progress) { display: none !important; }

  .section-label {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'Manrope', sans-serif;
    font-size: 0.6875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--accent-dark);
    margin-bottom: 1.25rem;
  }
  .section-label::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--accent-line);
  }

  .section-heading {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.5rem;
    font-weight: 400;
    color: var(--text-heading);
    line-height: 1.2;
    margin-bottom: 0.75rem;
    letter-spacing: -0.01em;
  }
  .section-intro {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    line-height: 1.75;
    max-width: 640px;
    margin-bottom: 2.5rem;
  }


  /* ═══════════ HERO ═══════════ */
  .home-hero {
    position: relative;
    max-width: none;
    margin: 0 -40px;
    padding: 0;
    background: var(--bg-hero);
    overflow: visible;
  }

  .hero-inner {
    position: relative;
    z-index: 1;
    padding: 96px calc(2rem + 40px) 64px calc(1rem + 40px);
    border-bottom: 1px solid var(--border-light);
  }

  .hero-columns {
    display: grid;
    grid-template-columns: 1fr 260px;
    gap: 3rem;
    align-items: start;
  }

  .hero-left {
    min-width: 0;
  }

  .hero-right {
    display: flex;
    flex-direction: column;
    gap: 2.5rem;
    padding-top: 0.25rem;
  }

  .hero-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(2.25rem, 4vw, 3.5rem);
    font-weight: 500;
    line-height: 1.1;
    letter-spacing: -0.01em;
    color: var(--text-heading);
    max-width: 800px;
    margin: 0 0 24px;
  }

  .hero-accent {
    font-style: italic;
    color: var(--accent-dark);
  }

  .hero-lead {
    font-size: 1.0625rem;
    color: var(--text-secondary);
    line-height: 1.65;
    max-width: 80%;
    padding-left: 1.5rem;
    margin-bottom: 0;
  }

  /* Hero info card (right column) */
  .hero-info-card {
    display: flex;
    flex-direction: column;
    gap: 16px;
    border: 1px solid var(--border-light);
    border-radius: 6px;
    padding: 24px;
    background: var(--bg-card);
  }

  .hero-info-header {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .hero-info-label {
    font-family: 'Manrope', sans-serif;
    font-size: 0.5625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--accent-dark);
    white-space: nowrap;
  }

  .hero-info-line {
    flex: 1;
    height: 1px;
    background: var(--border-light);
  }

  .hero-info-pillars {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 6px;
  }

  .hero-info-pillar {
    display: flex;
    align-items: center;
    gap: 10px;
    font-family: 'Manrope', sans-serif;
    font-size: 0.6875rem;
    font-weight: 500;
    color: var(--text-secondary);
    line-height: 1.3;
  }

  .pillar-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 4px;
    background: var(--bg-card-hover);
    color: var(--accent-dark);
    flex-shrink: 0;
  }



  /* ═══════════ THREE PILLARS ═══════════ */
  .pillars-section {
    padding: 5rem 0 4rem;
    border-bottom: 1px solid var(--border-light);
  }

  .pillars-eyebrow {
    display: block;
    font-family: 'Manrope', sans-serif;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--accent-dark);
    opacity: 0.7;
    margin-bottom: 0.75rem;
  }

  .pillars-columns {
    display: grid;
    grid-template-columns: 2fr 3fr;
    gap: 3rem;
    margin-top: 2.5rem;
    align-items: start;
  }

  .pillars-left {
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .pillars-right {
    position: sticky;
    top: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 560px;
  }

  .pillars-constellation {
    position: relative;
    width: 100%;
    height: 100%;
  }

  #pillars-canvas {
    display: block;
    width: 100%;
    height: 100%;
  }

  .pillar-card {
    display: block;
    padding: 1.25rem 0;
    border-top: 1px solid var(--border-light);
    text-decoration: none;
    transition: border-color 0.3s, padding 0.35s ease;
  }

  .pillar-card:hover {
    border-color: var(--accent-dark);
    padding: 1.75rem 0;
  }

  .pillar-card h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.35rem;
    font-weight: 500;
    color: var(--text-heading);
    margin-bottom: 0.875rem;
  }

  .pillar-card p {
    font-size: 0.8125rem;
    color: var(--text-body-60);
    line-height: 1.75;
    margin-bottom: 0;
  }

  .pillar-details {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: max-height 0.35s ease, opacity 0.3s ease, margin 0.35s ease;
  }

  .pillar-card:hover .pillar-details {
    max-height: 200px;
    opacity: 1;
    margin-top: 0.75rem;
  }

  .pillar-details li {
    font-family: 'Manrope', sans-serif;
    font-size: 0.6875rem;
    font-weight: 500;
    color: var(--text-tertiary);
    padding: 0.3rem 0;
    border-bottom: 1px solid var(--border-light);
    line-height: 1.4;
  }

  .pillar-details li:last-child {
    border-bottom: none;
  }

  .pillar-btn {
    display: inline-block;
    margin-top: 0;
    padding: 0;
    font-family: 'Manrope', sans-serif;
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.03em;
    color: var(--text-heading);
    border: 1px solid var(--border-light);
    border-radius: 4px;
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: max-height 0.35s ease, opacity 0.25s ease, margin 0.35s ease, padding 0.35s ease, background 0.2s, border-color 0.2s;
  }

  .pillar-card:hover .pillar-btn {
    max-height: 50px;
    opacity: 1;
    margin-top: 1.25rem;
    padding: 8px 18px;
  }

  .pillar-btn:hover {
    background: #fff;
    border-color: #fff;
    color: #141210;
  }

  [data-theme="dark"] .pillar-btn:hover {
    background: #e8dfd0;
    border-color: #e8dfd0;
    color: #141210;
  }


  /* ═══════════ POSITIONING STATEMENT ═══════════ */
  .position-band {
    margin: 0 -40px;
    border-top: 1px solid var(--border-light);
    border-bottom: 1px solid var(--border-light);
  }

  .position-scroll-outer {
    position: relative;
    height: 300vh;
  }

  .position-scroll-sticky {
    position: sticky;
    top: 0;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 40px;
  }

  .position-inner {
    max-width: 720px;
    text-align: center;
  }

  .position-eyebrow {
    display: block;
    font-family: 'Manrope', sans-serif;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--accent-dark);
    opacity: 0.7;
    margin-bottom: 0.75rem;
  }

  .home-page .position-heading {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.5rem;
    font-weight: 400;
    color: var(--text-heading);
    letter-spacing: -0.01em;
    margin: 0 0 2rem;
  }

  .position-statement {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.75rem;
    color: var(--text-heading);
    line-height: 1.65;
    letter-spacing: -0.005em;
  }

  .position-statement :global(.pw) {
    color: var(--text-heading);
    opacity: 0.15;
    transition: opacity 0.3s ease;
  }

  .position-statement :global(.pw.lit) {
    opacity: 1;
  }

  .position-statement :global(.pw.lit.pw-accent) {
    color: #141210;
    background: var(--accent-dark);
    padding: 0 0.12em 0.15em;
    margin: -0.15em 0;
    border-radius: 2px;
    line-height: 1;
  }

  .position-statement :global(.pw.lit.pw-red) {
    color: var(--accent-dark);
  }

  .position-statement :global(.pw.pw-italic) {
    font-style: italic;
  }

  .position-link {
    display: inline-block;
    margin-top: 2rem;
    padding: 10px 24px;
    font-family: 'Manrope', sans-serif;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    color: var(--text-heading);
    text-decoration: none;
    border: 1px solid var(--border-light);
    border-radius: 4px;
    opacity: 0;
    transition: opacity 0.4s ease, background 0.2s, border-color 0.2s;
  }

  .position-link.visible {
    opacity: 1;
  }

  .position-link:hover {
    background: #fff;
    border-color: #fff;
    color: #141210;
  }

  [data-theme="dark"] .position-link:hover {
    background: #e8dfd0;
    border-color: #e8dfd0;
    color: #141210;
  }


  /* ═══════════ DIVISIONS ═══════════ */
  .divisions-section {
    padding: 5rem 0;
    border-bottom: 1px solid var(--border-light);
  }

  .divisions-inner { max-width: 100%; }

  .divisions-eyebrow {
    display: block;
    font-family: 'Manrope', sans-serif;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--accent-dark);
    opacity: 0.7;
    margin-bottom: 0.75rem;
  }

  .home-page .divisions-heading {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.5rem;
    font-weight: 400;
    color: var(--text-heading);
    letter-spacing: -0.01em;
    margin: 0 0 1rem;
  }

  .divisions-intro {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    line-height: 1.75;
    max-width: 620px;
    margin-bottom: 2.5rem;
  }

  .divisions-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0 2rem;
  }

  .division-card {
    display: block;
    padding: 1.75rem 0;
    background: none;
    border: none;
    border-top: 1px solid var(--border-light);
    border-radius: 0;
    text-decoration: none;
    transition: opacity 0.2s;
  }

  .division-card:hover {
    opacity: 0.8;
  }

  .division-dot {
    display: block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-bottom: 1rem;
  }

  [data-accent="terracotta"] .division-dot { background: var(--accent-dark); }
  [data-accent="warm"] .division-dot { background: var(--chart-warm); }
  [data-accent="blue"] .division-dot { background: var(--chart-blue); }
  [data-accent="teal"] .division-dot { background: var(--chart-teal); }
  [data-accent="purple"] .division-dot { background: var(--chart-purple); }

  .division-num {
    display: block;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.5rem;
    color: var(--text-heading);
    opacity: 0.35;
    line-height: 1;
    margin-bottom: 0.75rem;
  }

  .division-card h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    font-weight: 500;
    color: var(--text-heading);
    line-height: 1.3;
    margin-bottom: 0.75rem;
  }

  .division-card p {
    font-size: 0.75rem;
    color: var(--text-body-60);
    line-height: 1.65;
    margin-bottom: 0;
  }


  /* ═══════════ ENTRY PATHWAY ═══════════ */
  .pathway-section {
    padding: 7rem 0 5rem;
    border-bottom: 1px solid var(--border-light);
  }

  .pathway-eyebrow {
    display: block;
    font-family: 'Manrope', sans-serif;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--accent-dark);
    opacity: 0.7;
    margin-bottom: 0.75rem;
  }

  .pathway-grid {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 4rem;
    margin-top: 2.5rem;
  }

  .pathway-tiers {
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .pathway-tier {
    display: flex;
    align-items: center;
    gap: 1.25rem;
    padding: 1.25rem 0;
    border-top: 1px solid var(--border-light);
    text-decoration: none;
    transition: border-color 0.2s;
  }

  .pathway-tier:hover {
    border-color: var(--accent-dark);
  }

  .pathway-num {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 1px solid var(--border-light);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-tertiary);
    flex-shrink: 0;
    transition: border-color 0.2s, color 0.2s;
  }

  .pathway-tier:hover .pathway-num,
  .pathway-tier.active .pathway-num {
    border-color: var(--accent-dark);
    color: var(--accent-dark);
  }

  .pathway-tier.active {
    border-color: var(--accent-dark);
  }

  .pathway-tier-content h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.25rem;
    font-weight: 500;
    color: var(--text-heading);
    margin-bottom: 0.25rem;
  }

  .pathway-meta {
    font-family: 'Manrope', sans-serif;
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-tertiary);
  }

  .pathway-cta-col {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .pathway-cta-col p {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    line-height: 1.75;
    margin-bottom: 1.5rem;
  }

  .pathway-btn {
    display: inline-block;
    padding: 12px 28px;
    font-family: 'Manrope', sans-serif;
    font-size: 0.8125rem;
    font-weight: 600;
    letter-spacing: 0.03em;
    color: #fff;
    background: var(--accent-dark);
    border-radius: 4px;
    text-decoration: none;
    transition: background 0.2s, transform 0.15s;
    align-self: flex-start;
  }

  .pathway-btn:hover {
    background: var(--accent-darker-hover);
    transform: translateY(-1px);
  }


  /* ═══════════ CTA ═══════════ */
  .cta-section {
    margin: 0 -40px;
    padding: 0;
    background: #141210;
    border-bottom: none;
  }

  .cta-inner {
    max-width: 640px;
    margin: 0 auto;
    padding: 6rem 2rem;
    text-align: center;
  }

  .cta-eyebrow {
    display: block;
    font-family: 'Manrope', sans-serif;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: rgba(196, 110, 66, 0.7);
    margin-bottom: 1rem;
  }

  .cta-primary-block h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 3rem;
    font-weight: 400;
    color: #e8dfd0;
    letter-spacing: -0.01em;
    margin: 0 0 1.25rem;
  }

  .cta-primary-block p {
    font-size: 1rem;
    color: rgba(208, 200, 188, 0.55);
    line-height: 1.7;
    max-width: 440px;
    margin: 0 auto 2.5rem;
  }

  .cta-primary-btn {
    display: inline-block;
    padding: 14px 40px;
    font-family: 'Manrope', sans-serif;
    font-size: 0.8125rem;
    font-weight: 600;
    letter-spacing: 0.03em;
    color: #141210;
    background: var(--accent-dark);
    border: none;
    border-radius: 4px;
    text-decoration: none;
    transition: background 0.2s, transform 0.15s;
  }

  .cta-primary-btn:hover {
    background: #d4773a;
    transform: translateY(-1px);
  }

  .cta-secondary-block {
    display: flex;
    justify-content: center;
    gap: 3rem;
    margin-top: 3rem;
    padding-top: 2.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.06);
  }

  .cta-alt {
    text-decoration: none;
    text-align: center;
  }

  .cta-alt-label {
    display: block;
    font-family: 'Manrope', sans-serif;
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: rgba(208, 200, 188, 0.35);
    margin-bottom: 0.375rem;
  }

  .cta-alt-action {
    display: block;
    font-size: 0.8125rem;
    color: rgba(208, 200, 188, 0.6);
    transition: color 0.2s;
  }

  .cta-alt:hover .cta-alt-action {
    color: #e8dfd0;
  }


  /* ═══════════ RESPONSIVE ═══════════ */
  @media (max-width: 1024px) {
    .home-hero { margin: 0 -20px; }
    .hero-inner { padding: 64px calc(1.5rem + 20px) 48px calc(1rem + 20px); }
    .hero-columns { grid-template-columns: 1fr 220px; gap: 2rem; }
    .position-band { margin: 0 -20px; }
    .position-scroll-sticky { padding: 0 20px; }
    .divisions-grid { grid-template-columns: repeat(3, 1fr); }
    .pathway-grid { grid-template-columns: 1fr; }
    .cta-section { margin: 0 -20px; }
  }

  @media (max-width: 768px) {
    .hero-inner { padding: 48px 1.25rem 36px; }
    .hero-columns { grid-template-columns: 1fr; }
    .hero-title { font-size: 2.25rem; }
    .hero-lead { padding-left: 0; max-width: 100%; }
    .pillars-right { display: none; }
    .pillars-columns { grid-template-columns: 1fr; }
    .home-page .position-heading { font-size: 2rem; }
    .position-statement { font-size: 1.375rem; min-height: 0; }
    .position-scroll-outer { height: auto; }
    .position-scroll-sticky { position: static; height: auto; padding: 4rem 20px; }
    .position-statement :global(.pw) { opacity: 1; }
    .position-link { opacity: 1; }
    .divisions-grid { grid-template-columns: 1fr 1fr; }
    .pathway-grid { grid-template-columns: 1fr; gap: 2rem; }
    .cta-inner { padding: 4rem 1.25rem; }
    .cta-primary-block h2 { font-size: 2.25rem; }
    .cta-secondary-block { flex-direction: column; gap: 1.5rem; }
  }

  @media (max-width: 480px) {
    .divisions-grid { grid-template-columns: 1fr; }
    .hero-title { font-size: 2rem; }
  }
</style>

<script is:inline data-astro-rerun>
function __pillarsInit() {
  if (window.__pillarsCleanup) { window.__pillarsCleanup(); window.__pillarsCleanup = null }

  var canvas = document.getElementById('pillars-canvas')
  if (!canvas) return
  var ctx = canvas.getContext('2d')
  if (!ctx) return

  var wrapper = canvas.parentElement
  var cards = document.querySelectorAll('.pillar-card[data-pillar]')
  var dpr = window.devicePixelRatio || 1
  var w, h, cx, cy
  var hoveredArm = -1
  var animId = 0
  var visible = false
  var rotAngle = 0 // slow continuous rotation

  function isDark() {
    return document.documentElement.getAttribute('data-theme') === 'dark'
  }

  var TURNS = 1.6
  var ARM_STATIC = 140      // static structure particles per arm
  var CENTER_STATIC = 30
  var TOTAL_ANGLE = TURNS * Math.PI * 2
  var arms = [[], [], []]
  var centerPts = []
  var armTips = []
  var rMax, rMin

  // Flowing particles — continuously travel along arms
  var flowParts = []
  var MAX_FLOW = 100

  // Spiral point for arm k at parameter t (0→1)
  function spiralPt(k, t, r0, r1) {
    var angle = t * TOTAL_ANGLE + k * (Math.PI * 2 / 3) + rotAngle
    var r = r0 + (r1 - r0) * t
    return { x: cx + r * Math.cos(angle), y: cy + r * Math.sin(angle) }
  }

  function spiralTangent(k, t, r0, r1) {
    var angle = t * TOTAL_ANGLE + k * (Math.PI * 2 / 3) + rotAngle
    var dr = r1 - r0
    var r = r0 + dr * t
    var dTheta = TOTAL_ANGLE
    var tx = dr * Math.cos(angle) - r * dTheta * Math.sin(angle)
    var ty = dr * Math.sin(angle) + r * dTheta * Math.cos(angle)
    var len = Math.sqrt(tx * tx + ty * ty) || 1
    return { x: tx / len, y: ty / len }
  }

  function buildArm(k) {
    var pts = []
    for (var i = 0; i <= ARM_STATIC; i++) {
      var t = i / ARM_STATIC
      var pos = spiralPt(k, t, rMin, rMax)
      var tan = spiralTangent(k, t, rMin, rMax)
      var perpX = -tan.y, perpY = tan.x
      var scatter = (Math.random() - 0.5) * 6
      pts.push({
        hx: pos.x + perpX * scatter,
        hy: pos.y + perpY * scatter,
        r: 0.5 + Math.random() * 0.8,
        ph: Math.random() * Math.PI * 2,
        br: 0.4 + t * 0.5,
        dsx: 0.0003 + Math.random() * 0.0008,
        dsy: 0.0004 + Math.random() * 0.0009,
        dax: 0.8 + Math.random() * 1.5,
        day: 0.6 + Math.random() * 1.2,
        t: t
      })
    }
    return pts
  }

  function buildCenter() {
    var pts = []
    for (var i = 0; i < CENTER_STATIC; i++) {
      var angle = Math.random() * Math.PI * 2
      var dist = Math.random() * rMin * 1.8
      pts.push({
        hx: cx + Math.cos(angle) * dist,
        hy: cy + Math.sin(angle) * dist,
        r: 0.4 + Math.random() * 0.6,
        ph: Math.random() * Math.PI * 2,
        br: 0.6,
        dsx: 0.0003 + Math.random() * 0.001,
        dsy: 0.0004 + Math.random() * 0.001,
        dax: 1 + Math.random() * 2,
        day: 0.8 + Math.random() * 1.5
      })
    }
    return pts
  }

  function spawnFlow() {
    if (flowParts.length >= MAX_FLOW) return
    var k = Math.floor(Math.random() * 3)
    var outward = Math.random() > 0.3 // 70% outward, 30% return
    flowParts.push({
      arm: k,
      t: outward ? 0 : 1,
      speed: (0.001 + Math.random() * 0.002) * (outward ? 1 : -1),
      r: 1 + Math.random() * 1.5,
      alpha: 0.3 + Math.random() * 0.4,
      perpOff: (Math.random() - 0.5) * 3 // slight perpendicular offset
    })
  }

  function resize() {
    var rect = wrapper.getBoundingClientRect()
    w = rect.width
    h = rect.height || 400
    canvas.width = w * dpr
    canvas.height = h * dpr
    canvas.style.width = w + 'px'
    canvas.style.height = h + 'px'
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0)

    cx = w / 2
    cy = h / 2
    rMin = 16
    rMax = Math.min(w * 0.44, h * 0.44)

    for (var k = 0; k < 3; k++) {
      arms[k] = buildArm(k)
      armTips[k] = spiralPt(k, 1, rMin, rMax)
    }
    centerPts = buildCenter()
    flowParts = []
  }

  function draw(time) {
    ctx.clearRect(0, 0, w, h)

    // Slow rotation — one full turn every ~90 seconds
    rotAngle = time * 0.00007

    var dark = isDark()
    var rgb = dark ? '212,112,78' : '165,61,46'
    var ba = dark ? 0.32 : 0.2
    var anyHover = hoveredArm !== -1
    var DIM = 0.25 // multiplier for unfocused elements when hovering

    // Pulse wave per arm (brightness ripple traveling outward)
    var pulseSpeed = 0.0003

    // Faint spiral guide paths
    for (var k = 0; k < 3; k++) {
      var isH = hoveredArm === k
      var dim = anyHover && !isH ? DIM : 1
      ctx.beginPath()
      for (var i = 0; i <= 100; i++) {
        var t = i / 100
        var pt = spiralPt(k, t, rMin, rMax)
        if (i === 0) ctx.moveTo(pt.x, pt.y)
        else ctx.lineTo(pt.x, pt.y)
      }
      ctx.strokeStyle = 'rgba(' + rgb + ',' + (isH ? 0.12 : 0.04) * dim + ')'
      ctx.lineWidth = isH ? 1.2 : 0.7
      ctx.stroke()
    }

    // Center glow
    var centerDim = anyHover ? 0.5 : 1
    var cGrad = ctx.createRadialGradient(cx, cy, 0, cx, cy, rMin * 3)
    cGrad.addColorStop(0, 'rgba(' + rgb + ',' + (dark ? 0.14 : 0.1) * centerDim + ')')
    cGrad.addColorStop(1, 'rgba(' + rgb + ',0)')
    ctx.beginPath()
    ctx.arc(cx, cy, rMin * 3, 0, Math.PI * 2)
    ctx.fillStyle = cGrad
    ctx.fill()

    // Center dot
    ctx.beginPath()
    ctx.arc(cx, cy, 3.5, 0, Math.PI * 2)
    ctx.fillStyle = 'rgba(' + rgb + ',' + (dark ? 0.55 : 0.45) * centerDim + ')'
    ctx.fill()

    // Center particles
    for (var i = 0; i < centerPts.length; i++) {
      var pt = centerPts[i]
      var dx = Math.sin(time * pt.dsx + pt.ph) * pt.dax
      var dy = Math.cos(time * pt.dsy + pt.ph + 1) * pt.day
      ctx.beginPath()
      ctx.arc(pt.hx + dx, pt.hy + dy, pt.r, 0, Math.PI * 2)
      ctx.fillStyle = 'rgba(' + rgb + ',' + ba * pt.br * centerDim + ')'
      ctx.fill()
    }

    // Static arm particles with pulse
    for (var k = 0; k < 3; k++) {
      var pts = arms[k]
      var isH = hoveredArm === k
      var dim = anyHover && !isH ? DIM : 1
      var hMult = isH ? 2 : dim

      var pulsePhase = (time * pulseSpeed + k * 0.333) % 1.4
      var pulseT = pulsePhase / 1.4

      for (var i = 0; i < pts.length; i++) {
        var pt = pts[i]
        var sPos = spiralPt(k, pt.t, rMin, rMax)
        var dx = Math.sin(time * pt.dsx + pt.ph) * pt.dax
        var dy = Math.cos(time * pt.dsy + pt.ph + 1) * pt.day

        var distP = Math.abs(pt.t - pulseT)
        var pBr = distP < 0.15 ? (1 - distP / 0.15) * 0.5 : 0

        var a = (ba * pt.br + pBr) * hMult
        if (a > 1) a = 1

        ctx.beginPath()
        ctx.arc(sPos.x + dx, sPos.y + dy, pt.r + pBr * 0.6, 0, Math.PI * 2)
        ctx.fillStyle = 'rgba(' + rgb + ',' + a + ')'
        ctx.fill()
      }

      // Tip glow + node
      var tip = spiralPt(k, 1, rMin, rMax)
      var tipR = isH ? 22 : 12
      var tGrad = ctx.createRadialGradient(tip.x, tip.y, 0, tip.x, tip.y, tipR)
      tGrad.addColorStop(0, 'rgba(' + rgb + ',' + (isH ? 0.22 : 0.1) * dim + ')')
      tGrad.addColorStop(1, 'rgba(' + rgb + ',0)')
      ctx.beginPath()
      ctx.arc(tip.x, tip.y, tipR, 0, Math.PI * 2)
      ctx.fillStyle = tGrad
      ctx.fill()

      ctx.beginPath()
      ctx.arc(tip.x, tip.y, isH ? 4.5 : 3, 0, Math.PI * 2)
      ctx.fillStyle = 'rgba(' + rgb + ',' + (isH ? 0.85 : 0.5) * dim + ')'
      ctx.fill()
    }

    // Flowing particles along spiral arms
    for (var i = flowParts.length - 1; i >= 0; i--) {
      var fp = flowParts[i]
      fp.t += fp.speed
      if (fp.t > 1.05 || fp.t < -0.05) { flowParts.splice(i, 1); continue }

      var pos = spiralPt(fp.arm, Math.max(0, Math.min(1, fp.t)), rMin, rMax)
      var tan = spiralTangent(fp.arm, Math.max(0, Math.min(1, fp.t)), rMin, rMax)
      var px = pos.x + (-tan.y) * fp.perpOff
      var py = pos.y + tan.x * fp.perpOff

      var isH = hoveredArm === fp.arm
      var fDim = anyHover && !isH ? DIM : 1
      var fAlpha = fp.alpha * (isH ? 1.8 : fDim)
      // Fade at edges
      if (fp.t < 0.1) fAlpha *= fp.t / 0.1
      else if (fp.t > 0.9) fAlpha *= (1 - fp.t) / 0.1

      ctx.beginPath()
      ctx.arc(px, py, fp.r, 0, Math.PI * 2)
      ctx.fillStyle = 'rgba(' + rgb + ',' + fAlpha + ')'
      ctx.fill()
    }

    // Spawn flowing particles continuously
    if (Math.random() < 0.35) spawnFlow()

  }

  var lastFrame = 0
  function tick(time) {
    if (!visible) { animId = requestAnimationFrame(tick); return }
    if (time - lastFrame > 33) {
      lastFrame = time
      draw(time)
    }
    animId = requestAnimationFrame(tick)
  }

  // Card hover → arm highlight
  for (var i = 0; i < cards.length; i++) {
    (function(idx) {
      cards[idx].addEventListener('mouseenter', function() { hoveredArm = idx })
      cards[idx].addEventListener('mouseleave', function() { hoveredArm = -1 })
    })(i)
  }

  // Visibility
  var observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(e) { visible = e.isIntersecting })
  }, { threshold: 0.1 })
  observer.observe(canvas)

  resize()
  window.addEventListener('resize', resize)
  animId = requestAnimationFrame(tick)

  window.__pillarsCleanup = function() {
    if (animId) cancelAnimationFrame(animId)
    window.removeEventListener('resize', resize)
    observer.disconnect()
    hoveredArm = -1
  }
}
__pillarsInit()
</script>

<script is:inline data-astro-rerun>
(function __positionInit() {
  if (window.__positionCleanup) { window.__positionCleanup(); window.__positionCleanup = null }

  var el = document.getElementById('position-text')
  var outer = document.querySelector('.position-scroll-outer')
  var link = document.getElementById('position-link')
  if (!el || !outer) return

  // Mobile: show full text, no scroll effect
  var isMobile = window.innerWidth < 768
  if (isMobile) {
    if (link) link.classList.add('visible')
    return
  }

  // Split into word spans
  var words = el.textContent.trim().split(/\s+/)
  el.innerHTML = words.map(function(w) {
    return '<span class="pw">' + w + '</span>'
  }).join(' ')

  var spans = el.querySelectorAll('.pw')
  var total = spans.length

  // Mark accent + italic words
  for (var i = 0; i < total; i++) {
    if (words[i] === 'rejects') spans[i].classList.add('pw-accent')
    if (words[i].indexOf('complementary') >= 0 || words[i].indexOf('alternative') >= 0) spans[i].classList.add('pw-italic')
    if (words[i] === 'same' || words[i] === 'therapeutic' || words[i].indexOf('reality') === 0) spans[i].classList.add('pw-red')
  }

  function update() {
    var rect = outer.getBoundingClientRect()
    var runway = outer.offsetHeight - window.innerHeight
    if (runway <= 0) return
    var progress = Math.max(0, Math.min(1, -rect.top / runway))

    var litCount = Math.round(progress * total)
    for (var i = 0; i < total; i++) {
      if (i < litCount) spans[i].classList.add('lit')
      else spans[i].classList.remove('lit')
    }

    if (link) {
      if (progress > 0.92) link.classList.add('visible')
      else link.classList.remove('visible')
    }
  }

  var ticking = false
  function onScroll() {
    if (!ticking) {
      ticking = true
      requestAnimationFrame(function() {
        update()
        ticking = false
      })
    }
  }

  window.addEventListener('scroll', onScroll, { passive: true })
  update()

  window.__positionCleanup = function() {
    window.removeEventListener('scroll', onScroll)
  }
})()
</script>

<script>
  function initHomeReveal() {
    const targets = document.querySelectorAll('.pillar-card, .pathway-tier')
    if (!targets.length) return

    targets.forEach(el => {
      const htmlEl = el as HTMLElement
      htmlEl.style.opacity = '0'
      htmlEl.style.transform = 'translateY(12px)'
      htmlEl.style.transition = 'opacity 0.5s ease, transform 0.5s ease'
    })

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const el = entry.target as HTMLElement
          el.style.opacity = '1'
          el.style.transform = 'translateY(0)'
          observer.unobserve(el)
        }
      })
    }, { threshold: 0.15 })

    targets.forEach(el => observer.observe(el))
  }

  function initPathwayActive() {
    const tiers = document.querySelectorAll('.pathway-tier')
    if (!tiers.length) return

    function updateActive() {
      const midY = window.innerHeight / 2
      let closest: Element | null = null
      let closestDist = Infinity

      tiers.forEach(tier => {
        const rect = tier.getBoundingClientRect()
        const center = rect.top + rect.height / 2
        const dist = Math.abs(center - midY)
        if (dist < closestDist && rect.top < window.innerHeight && rect.bottom > 0) {
          closestDist = dist
          closest = tier
        }
      })

      tiers.forEach(tier => {
        if (tier === closest && closestDist < 200) {
          tier.classList.add('active')
        } else {
          tier.classList.remove('active')
        }
      })
    }

    window.addEventListener('scroll', updateActive, { passive: true })
    updateActive()
  }

  document.addEventListener('DOMContentLoaded', () => { initHomeReveal(); initPathwayActive(); })
  document.addEventListener('astro:page-load', () => { initHomeReveal(); initPathwayActive(); })
</script>
