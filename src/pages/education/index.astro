---
import PortalLayout from '../../layouts/PortalLayout.astro'
---

<PortalLayout
  title="Education Programs — Sohma Institute"
  description="Clinical mentorship, case-based learning, and supervised practice across four credential tiers. The Institute does not pay clinicians to lecture. It pays them to mentor."
>
  <article class="edu-page">

    <!-- HERO -->
    <header class="edu-hero">
      <div class="hero-inner">
        <div class="section-label">Education Programs</div>
        <h1 class="hero-title">We don't pay clinicians to lecture.</h1>
        <p class="hero-subtitle"><span class="hero-accent">We pay them to mentor.</span></p>
        <p class="hero-lead">The education architecture rejects the lecture-hall reproduction model. Every credential is built on clinical mentorship, case-based learning, and supervised practice within real patient populations. Didactic content is delivered asynchronously; synchronous time is reserved for clinical reasoning, supervised application, and peer case conferencing.</p>
      </div>
    </header>


    <!-- PEDAGOGICAL COMMITMENTS -->
    <section class="pillars-section">
      <h2 class="section-heading">Pedagogical Commitments</h2>
      <div class="pillars-grid">
        <div class="pillar-card">
          <h3>Case-Based Architecture</h3>
          <p>Every unit of competency is assessed through real clinical cases, not simulated scenarios. Students work within the Sohma House patient population from Tier 1 onward, with supervision intensity calibrated to credential level.</p>
          <a href="/education/pedagogy" class="pillar-link">Read more &rarr;</a>
        </div>
        <div class="pillar-card">
          <h3>Inverse Classroom</h3>
          <p>Didactic content is asynchronous. All synchronous contact hours are dedicated to clinical reasoning, case presentation, supervised practice, and peer conferencing. The Institute does not pay clinicians to lecture. It pays them to mentor.</p>
          <a href="/education/pedagogy" class="pillar-link">Read more &rarr;</a>
        </div>
        <div class="pillar-card">
          <h3>Portfolio Assessment</h3>
          <p>No written examinations. Competency is demonstrated through clinical portfolios containing case documentation, reflective practice records, supervisor evaluations, and peer review. The portfolio becomes the practitioner's ongoing professional development record.</p>
          <a href="/education/pedagogy" class="pillar-link">Read more &rarr;</a>
        </div>
      </div>
    </section>


    <!-- CREDENTIAL LADDER -->
    <section class="ladder-section">
      <h2 class="section-heading">Credential Ladder</h2>

      <div class="ladder">
        <div class="ladder-progress" id="ladder-progress"></div>
        <div class="ladder-tier" data-accent="neutral">
          <span class="ladder-num">1<span class="wave-layer wave-1"></span><span class="wave-layer wave-2"></span><span class="wave-layer wave-3"></span></span>
          <div class="ladder-body">
            <div class="ladder-meta">
              <span class="ladder-duration">12 weeks</span>
              <span class="ladder-mode">Online + Clinical Intensive</span>
            </div>
            <h3>Foundation Certificate</h3>
            <p>Foundational literacy in one division. Systems biology primer, clinical reasoning methodology, regulatory and ethical frameworks. Entry point for registered health practitioners seeking to add traditional medicine competencies. Prerequisite: current AHPRA registration or equivalent.</p>
            <a href="/education/foundation-certificate" class="ladder-cta">View program &rarr;</a>
          </div>
        </div>

        <div class="ladder-tier" data-accent="green">
          <span class="ladder-num">2<span class="wave-layer wave-1"></span><span class="wave-layer wave-2"></span><span class="wave-layer wave-3"></span></span>
          <div class="ladder-body">
            <div class="ladder-meta">
              <span class="ladder-duration">12 months</span>
              <span class="ladder-mode">Hybrid Clinical Mentorship</span>
            </div>
            <h3>Advanced Diploma</h3>
            <p>Deep specialisation in one division with mandatory cross-divisional elective. 200 hours supervised clinical practice within Sohma House or partner sites. Clinical portfolio assessment rather than examination. Produces competent clinical practitioners in their chosen division.</p>
            <a href="/education/advanced-diploma" class="ladder-cta">View program &rarr;</a>
          </div>
        </div>

        <div class="ladder-tier" data-accent="warm">
          <span class="ladder-num">3<span class="wave-layer wave-1"></span><span class="wave-layer wave-2"></span><span class="wave-layer wave-3"></span></span>
          <div class="ladder-body">
            <div class="ladder-meta">
              <span class="ladder-duration">18 months</span>
              <span class="ladder-mode">Research + Clinical Integration</span>
            </div>
            <h3>Graduate Diploma</h3>
            <p>Cross-divisional clinical reasoning at complexity. Requires integration of minimum two divisional frameworks. Original research contribution (case series, systematic review, or protocol validation). Articulation pathway to university Master's programs through partner institutions.</p>
            <a href="/education/graduate-diploma" class="ladder-cta">View program &rarr;</a>
          </div>
        </div>

        <div class="ladder-tier" data-accent="terracotta">
          <span class="ladder-num">4<span class="wave-layer wave-1"></span><span class="wave-layer wave-2"></span><span class="wave-layer wave-3"></span></span>
          <div class="ladder-body">
            <div class="ladder-meta">
              <span class="ladder-duration">2 years</span>
              <span class="ladder-mode">Clinical Leadership + Research</span>
            </div>
            <h3>Fellowship</h3>
            <p>The Institute's highest credential. Fellows produce original research, supervise clinical trainees, and contribute to protocol development. Fellowship requires demonstrated capacity to operate across three or more divisions simultaneously. Produces clinical leaders and future Institute faculty.</p>
            <a href="/education/fellowship" class="ladder-cta">View program &rarr;</a>
          </div>
        </div>
      </div>
    </section>


    <!-- DIVISION CONNECTION -->
    <section class="division-section">
      <div class="division-callout">
        <div class="division-callout-inner">
          <div>
            <h2>Every tier is studied within a Division</h2>
            <p>When you enrol, you choose both a <strong>credential tier</strong> and a <strong>division</strong>. The tier determines your level of training and autonomy. The division determines your clinical specialisation. A Tier 2 student in Complex Herbal Medicines and a Tier 2 student in Emergent &amp; Entheogenic Modalities follow the same pedagogical structure but study entirely different clinical content.</p>
          </div>
          <a href="/#divisions" class="division-link">Explore the five divisions &rarr;</a>
        </div>
      </div>
    </section>


    <!-- CTA -->
    <section class="cta-section">
      <div class="cta-inner">
        <h2>Ready to begin?</h2>
        <p>Tell us where you're starting and where you want to go. Expressions of interest are open for all credential tiers.</p>
        <div class="cta-buttons">
          <a href="/contact" class="cta-primary">Express Interest</a>
          <a href="#" class="cta-secondary">Download Prospectus</a>
        </div>
      </div>
    </section>

  </article>
</PortalLayout>

<style>
  .edu-page {
    font-family: 'Manrope', sans-serif;
    color: var(--text-heading);
    padding: 0;
    overflow: hidden;
  }
  .edu-page p { line-height: 1.8; margin: 0 0 1rem; }
  .edu-page p:last-child { margin-bottom: 0; }
  .edu-page h2, .edu-page h3 { margin: 0; }

  .section-label {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'Manrope', sans-serif;
    font-size: 0.6875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--accent-dark);
    margin-bottom: 1.25rem;
  }
  .section-label::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--accent-line);
  }

  .section-heading {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.5rem;
    font-weight: 400;
    color: var(--text-heading);
    line-height: 1.2;
    margin-bottom: 0.75rem;
    letter-spacing: -0.01em;
  }

  .section-intro {
    font-size: 0.9375rem;
    color: var(--text-body-65);
    line-height: 1.85;
    max-width: 680px;
    margin-bottom: 2rem;
  }


  /* ═══════════ HERO ═══════════ */
  .edu-hero {
    position: relative;
    max-width: none;
    margin: 0 -40px;
    padding: 0;
    background: var(--bg-hero);
    overflow: visible;
  }

  .hero-inner {
    position: relative;
    z-index: 1;
    padding: 96px calc(2rem + 40px) 64px calc(1rem + 40px);
    border-bottom: 1px solid var(--border-light);
  }

  .hero-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(2.5rem, 5vw, 4.25rem);
    font-weight: 500;
    line-height: 1.1;
    letter-spacing: -0.01em;
    color: var(--text-heading);
    max-width: 800px;
    margin: 0;
  }

  .hero-subtitle {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(2rem, 4vw, 3.25rem);
    font-weight: 500;
    line-height: 1.1;
    letter-spacing: -0.01em;
    max-width: 800px;
    margin: 0 0 24px;
  }

  .hero-accent {
    font-style: italic;
    color: var(--accent-dark);
  }

  .hero-lead {
    font-size: 1.0625rem;
    color: var(--text-secondary);
    line-height: 1.65;
    max-width: 640px;
    padding-left: 1.5rem;
  }


  /* ═══════════ PEDAGOGY PILLARS ═══════════ */
  .pillars-section {
    padding: 4rem 0;
    border-bottom: 1px solid var(--border-light);
  }

  .pillars-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }

  .pillar-card {
    border: 1px solid var(--border-light);
    border-radius: 6px;
    padding: 1.75rem;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .pillar-card:hover {
    border-color: var(--accent-border-15);
    box-shadow: 0 2px 12px var(--bg-card);
  }

  .pillar-card h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.2rem;
    font-weight: 500;
    color: var(--text-heading);
    margin-bottom: 0.75rem;
  }

  .pillar-card p {
    font-size: 0.8125rem;
    color: var(--text-body-60);
    line-height: 1.75;
    margin-bottom: 1rem;
  }

  .pillar-link {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--accent-dark);
    text-decoration: none;
    letter-spacing: 0.02em;
    transition: color 0.2s;
  }

  .pillar-link:hover {
    color: var(--accent);
  }


  /* ═══════════ CREDENTIAL LADDER ═══════════ */
  .ladder-section {
    padding: 4rem 0;
    border-bottom: 1px solid var(--border-light);
  }

  .ladder {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 0;
    max-width: 800px;
    margin: 0 auto;
  }

  /* Central vertical line — background track */
  .ladder::before {
    content: '';
    position: absolute;
    top: calc(1.5rem + 24px);
    bottom: calc(1.5rem + 24px);
    left: 50%;
    width: 3px;
    background: var(--accent-bg-10);
    transform: translateX(-50%);
  }

  /* Animated gradient progress line */
  .ladder-progress {
    position: absolute;
    top: calc(1.5rem + 24px);
    bottom: calc(1.5rem + 24px);
    left: 50%;
    width: 3px;
    transform: translateX(-50%);
    transform-origin: top;
    background: linear-gradient(
      180deg,
      #9e3a2e 0%,
      #d4634a 15%,
      #A53D2E 28%,
      #c45a42 42%,
      #8b3325 55%,
      #d4634a 68%,
      #A53D2E 80%,
      #c45a42 92%,
      #9e3a2e 100%
    );
    background-size: 100% 300%;
    animation: progressSwirlV 4s ease-in-out infinite;
    scale: 1 0;
    transition: scale 0.15s ease-out;
    z-index: 0;
  }

  .ladder-tier {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 1.5rem;
    padding: 1.5rem 0;
    align-items: start;
  }

  /* Odd tiers: content LEFT, number CENTER */
  .ladder-tier:nth-child(odd) .ladder-body {
    grid-column: 1;
    grid-row: 1;
    text-align: left;
  }
  .ladder-tier:nth-child(odd) .ladder-num {
    grid-column: 2;
    grid-row: 1;
  }

  /* Even tiers: number CENTER, content RIGHT */
  .ladder-tier:nth-child(even) .ladder-num {
    grid-column: 2;
    grid-row: 1;
  }
  .ladder-tier:nth-child(even) .ladder-body {
    grid-column: 3;
    grid-row: 1;
  }

  .ladder-tier:nth-child(odd) .ladder-meta {
    justify-content: flex-start;
  }

  .ladder-num {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: grid;
    place-items: center;
    font-family: 'Manrope', sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    line-height: 1;
    flex-shrink: 0;
    background: #fff;
    z-index: 1;
    position: relative;
    overflow: hidden;
    transition: color 0.3s ease;
  }

  /* Liquid fill pseudo-element — fills top-down, driven by scroll */
  .ladder-num::before {
    content: '';
    position: absolute;
    top: 0;
    left: -10%;
    width: 120%;
    height: var(--fill, 0%);
    background: linear-gradient(
      180deg,
      #9e3a2e 0%,
      #A53D2E 40%,
      #c45a42 80%,
      #d4634a 100%
    );
    z-index: -1;
  }

  /* Wave layers at the fill surface */
  .ladder-num .wave-layer {
    position: absolute;
    left: -40%;
    width: 180%;
    height: 12px;
    top: calc(var(--fill, 0%) - 6px);
    z-index: -1;
    opacity: 0;
    pointer-events: none;
    border-radius: 40%;
  }

  .ladder-num .wave-1 {
    background: rgba(212, 99, 74, 0.6);
    border-radius: 45% 42% 50% 48%;
  }
  .ladder-num .wave-2 {
    background: rgba(165, 61, 46, 0.4);
    border-radius: 38% 52% 46% 44%;
    height: 10px;
    top: calc(var(--fill, 0%) - 5px);
  }
  .ladder-num .wave-3 {
    background: rgba(158, 58, 46, 0.25);
    border-radius: 50% 40% 42% 48%;
    height: 8px;
    top: calc(var(--fill, 0%) - 3px);
  }

  .ladder-num.settling .wave-1 {
    opacity: 1;
    animation: wave1 2.4s ease-in-out infinite;
  }
  .ladder-num.settling .wave-2 {
    opacity: 1;
    animation: wave2 3.1s ease-in-out infinite;
  }
  .ladder-num.settling .wave-3 {
    opacity: 1;
    animation: wave3 2.8s ease-in-out infinite;
  }

  @keyframes wave1 {
    0%   { transform: translateX(-4px) rotate(-1deg); border-radius: 45% 42% 50% 48%; }
    25%  { transform: translateX(3px) rotate(1.5deg); border-radius: 40% 50% 45% 42%; }
    50%  { transform: translateX(-2px) rotate(-0.5deg); border-radius: 48% 44% 42% 50%; }
    75%  { transform: translateX(4px) rotate(1deg); border-radius: 42% 48% 50% 44%; }
    100% { transform: translateX(-4px) rotate(-1deg); border-radius: 45% 42% 50% 48%; }
  }

  @keyframes wave2 {
    0%   { transform: translateX(3px) rotate(0.5deg); border-radius: 38% 52% 46% 44%; }
    30%  { transform: translateX(-4px) rotate(-1deg); border-radius: 50% 42% 38% 48%; }
    60%  { transform: translateX(2px) rotate(1.5deg); border-radius: 44% 46% 52% 40%; }
    100% { transform: translateX(3px) rotate(0.5deg); border-radius: 38% 52% 46% 44%; }
  }

  @keyframes wave3 {
    0%   { transform: translateX(-2px) rotate(1deg); border-radius: 50% 40% 42% 48%; }
    35%  { transform: translateX(3px) rotate(-0.5deg); border-radius: 42% 48% 40% 50%; }
    65%  { transform: translateX(-3px) rotate(1.5deg); border-radius: 48% 42% 50% 40%; }
    100% { transform: translateX(-2px) rotate(1deg); border-radius: 50% 40% 42% 48%; }
  }
  [data-accent="neutral"] .ladder-num { color: var(--text-tertiary); }
  [data-accent="green"] .ladder-num { color: var(--accent-green); }
  [data-accent="warm"] .ladder-num { color: var(--chart-warm); }
  [data-accent="terracotta"] .ladder-num { color: var(--accent-dark); }


  .ladder-body { flex: 1; }

  .ladder-meta {
    display: inline-flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
    background: var(--text-heading);
    padding: 6px 10px;
  }
  .ladder-duration,
  .ladder-mode {
    font-size: 0.625rem;
    font-weight: 600;
    color: rgba(255,255,255,0.85);
    letter-spacing: 0.02em;
  }
  .ladder-duration {
    color: #fff;
    font-weight: 700;
  }
  .ladder-duration::after {
    content: '·';
    margin-left: 0.5rem;
    color: rgba(255,255,255,0.35);
  }

  .ladder-body h3 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.3rem;
    font-weight: 500;
    color: var(--text-heading);
    margin-bottom: 0.5rem;
  }

  .ladder-body p {
    font-size: 0.875rem;
    color: var(--text-body-60);
    line-height: 1.7;
    margin-bottom: 0.75rem;
  }

  .ladder-cta {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--accent-dark);
    letter-spacing: 0.02em;
    text-decoration: none;
    transition: color 0.2s;
  }
  .ladder-cta:hover {
    color: var(--accent);
  }


  /* ═══════════ DIVISION CONNECTION ═══════════ */
  .division-section {
    padding: 4rem 0;
    border-bottom: 1px solid var(--border-light);
  }

  .division-callout {
    background: linear-gradient(135deg, var(--bg-dark-start) 0%, var(--bg-dark-end) 100%);
    border-radius: 8px;
    padding: 2.5rem;
  }

  .division-callout-inner {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .division-callout h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.5rem;
    font-weight: 400;
    color: var(--text-on-dark);
    margin-bottom: 0.75rem;
  }

  .division-callout p {
    font-size: 0.875rem;
    color: rgba(240,235,229,0.5);
    line-height: 1.75;
  }
  .division-callout strong {
    color: rgba(240,235,229,0.75);
  }

  .division-link {
    font-family: 'Manrope', sans-serif;
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.06em;
    color: var(--accent);
    text-decoration: none;
    transition: color 0.2s;
  }
  .division-link:hover { color: #e0725a; }


  /* ═══════════ CTA ═══════════ */
  .cta-section {
    padding: 4rem 0 6rem;
  }

  .cta-inner {
    text-align: center;
    max-width: 540px;
    margin: 0 auto;
  }

  .cta-inner h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.75rem;
    font-weight: 400;
    color: var(--text-heading);
    margin-bottom: 1rem;
  }

  .cta-inner p {
    font-size: 0.875rem;
    color: var(--text-body-60);
    line-height: 1.75;
    margin-bottom: 2rem;
  }

  .cta-buttons {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .cta-primary {
    font-family: 'Manrope', sans-serif;
    font-size: 0.8125rem;
    font-weight: 700;
    letter-spacing: 0.04em;
    color: #fff;
    background: var(--accent-dark);
    border: none;
    border-radius: 4px;
    padding: 12px 28px;
    text-decoration: none;
    transition: background 0.2s;
  }
  .cta-primary:hover { background: var(--accent-darker-hover); }

  .cta-secondary {
    font-family: 'Manrope', sans-serif;
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--text-secondary);
    background: none;
    border: 1px solid var(--glass-12);
    border-radius: 4px;
    padding: 12px 28px;
    text-decoration: none;
    transition: border-color 0.2s, color 0.2s;
  }
  .cta-secondary:hover {
    border-color: var(--accent-border-30);
    color: var(--accent-dark);
  }


  /* ═══════════ RESPONSIVE ═══════════ */
  @media (max-width: 1024px) {
    .edu-hero {
      margin: 0 -20px;
    }

    .hero-inner {
      padding: 64px calc(1.5rem + 20px) 48px calc(1rem + 20px);
    }
  }

  @media (max-width: 768px) {
    .hero-inner {
      padding: 48px 1.25rem 36px;
    }

    .hero-title { font-size: 2.5rem; }
    .hero-subtitle { font-size: 2rem; }
    .hero-lead { padding-left: 0; }

    .ladder::before { left: 24px; top: calc(1.5rem + 24px); bottom: calc(1.5rem + 24px); }
    .ladder-progress { left: 24px; top: calc(1.5rem + 24px); bottom: calc(1.5rem + 24px); }
    .ladder-tier {
      grid-template-columns: auto 1fr;
    }
    .ladder-tier:nth-child(odd) .ladder-body,
    .ladder-tier:nth-child(even) .ladder-body {
      grid-column: 2;
      text-align: left;
    }
    .ladder-tier:nth-child(odd) .ladder-num,
    .ladder-tier:nth-child(even) .ladder-num {
      grid-column: 1;
    }
    .ladder-tier:nth-child(odd) .ladder-meta {
      justify-content: flex-start;
    }

    .pillars-grid { grid-template-columns: 1fr; }
    .division-callout { padding: 2rem 1.5rem; }
  }
</style>

<script>
  function initLadderProgress() {
    const ladder = document.querySelector('.ladder') as HTMLElement
    const progressBar = document.getElementById('ladder-progress')
    const nums = ladder?.querySelectorAll('.ladder-num') as NodeListOf<HTMLElement>
    if (!ladder || !progressBar || !nums.length) return

    let scrollTimer: ReturnType<typeof setTimeout> | null = null

    function removeSettling() {
      nums.forEach(num => num.classList.remove('settling'))
    }

    function addSettling() {
      nums.forEach(num => {
        const fill = parseFloat(num.style.getPropertyValue('--fill') || '0')
        if (fill > 0 && fill < 100) {
          num.classList.add('settling')
        }
      })
    }

    function update() {
      const rect = ladder.getBoundingClientRect()
      const viewportH = window.innerHeight
      const ladderTop = rect.top
      const ladderHeight = rect.height

      if (ladderTop >= viewportH || ladderTop + ladderHeight <= 0) {
        progressBar.style.scale = '1 0'
        return
      }

      const scrolledInto = viewportH * 0.4 - ladderTop
      const progress = Math.max(0, Math.min(1, scrolledInto / ladderHeight))
      progressBar.style.scale = `1 ${progress}`

      // Remove waves while scrolling
      removeSettling()

      // Fill circles proportionally as the progress line passes through them
      const lineTop = rect.top + 24
      const lineLength = (ladderHeight - 48) * progress
      const lineBottom = lineTop + lineLength

      nums.forEach(num => {
        const numRect = num.getBoundingClientRect()
        const numTop = numRect.top
        const numBottom = numRect.bottom
        const numHeight = numRect.height

        if (lineBottom <= numTop) {
          num.style.setProperty('--fill', '0%')
          num.style.color = ''
        } else if (lineBottom >= numBottom) {
          num.style.setProperty('--fill', '100%')
          num.style.color = '#fff'
        } else {
          const fillPct = ((lineBottom - numTop) / numHeight) * 100
          num.style.setProperty('--fill', `${Math.min(100, fillPct)}%`)
          num.style.color = fillPct > 55 ? '#fff' : ''
        }
      })

      // Start waves after scrolling stops
      if (scrollTimer) clearTimeout(scrollTimer)
      scrollTimer = setTimeout(addSettling, 150)
    }

    window.addEventListener('scroll', update, { passive: true })
    window.addEventListener('resize', update, { passive: true })
    update()
    setTimeout(addSettling, 300)
  }

  document.addEventListener('DOMContentLoaded', initLadderProgress)
  document.addEventListener('astro:page-load', initLadderProgress)
</script>
